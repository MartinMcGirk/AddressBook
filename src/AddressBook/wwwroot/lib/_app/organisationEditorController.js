!function(){"use strict";function n(n,o,a){var i=this;i.organisationId=n.organisationId,i.organisation={},i.ErrorMessage="",i.isBusy=!0,i.newPerson={};var s="/api/organisations/"+i.organisationId;o.get(s).then(function(n){angular.copy(n.data,i.organisation)},function(n){i.errorMessage="Failed to load persons"}).finally(function(){i.isBusy=!1}),i.addPerson=function(){i.isBusy=!0,o.post(s+"/persons",i.newPerson).then(function(n){i.organisation.persons.push(n.data),i.newPerson={},a.path("/manager/"+i.organisationId)},function(n){i.errorMessage="Failed to add new person"}).finally(function(){i.isBusy=!1})},i.updateOrganisation=function(){i.isBusy=!0,i.errorMessage="",o.put("/api/organisations",i.organisation).then(function(n){a.path("/")},function(){i.errorMessage="Failed to update organisation"}).finally(function(){i.isBusy=!1})},i.deleteOrganisation=function(){i.isBusy=!0,i.errorMessage="",o.delete("/api/organisations/"+i.organisationId).then(function(n){a.path("/")},function(){i.errorMessage="Failed to delete organisation"}).finally(function(){i.isBusy=!1})}}n.$inject=["$routeParams","$http","$location"],angular.module("app-organisations").controller("organisationEditorController",n)}();